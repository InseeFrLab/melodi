[{"path":"https://InseeFrLab.github.io/melodi/articles/A-filtre-explorateur.html","id":"ajuster-sa-requête-via-lexplorateur","dir":"Articles","previous_headings":"","what":"Ajuster sa requête via l’explorateur","title":"Filtrer à l'aide de l’explorateur","text":"En navigant dans le catalogue de données de l’Insee, choisir son jeu de données, puis dans l’onglet Données, cliquer sur Explorateur. En utilisant les filtres appliquables sur chaque colonne, ajuster une requête filtrée répondant à son besoin. En bas de page, copier l’URL API correspondant. Vue explorateur","code":""},{"path":"https://InseeFrLab.github.io/melodi/articles/A-filtre-explorateur.html","id":"charger-les-données-associées-grâce-à-la-requête","dir":"Articles","previous_headings":"","what":"Charger les données associées grâce à la requête","title":"Filtrer à l'aide de l’explorateur","text":"l’aide de la fonction get_data(), passer en paramètre la requête copiée. En retour le résultat est obtenu sous forme de data.frame. Avertissement : cette fonction est limitée à un retour de 10 000 résultats, au delà, filtrer davantage sa requête ou passer plutôt par un chargement complet du jeu de données via get_all_data() et filtrer posteriori en R.","code":"data <- get_data(\"https://api.insee.fr/melodi/data/DS_RP_POPULATION_PRINC?SEX=_T&AGE=_T&GEO=REG\")"},{"path":"https://InseeFrLab.github.io/melodi/articles/B-donnees-locales.html","id":"filtrer-sur-le-territoire-de-mon-choix","dir":"Articles","previous_headings":"","what":"Filtrer sur le territoire de mon choix","title":"Filtrer par critère géographique","text":"Pour les jeux de données proposant plusieurs niveaux géographique de diffusion, la fonction get_local_data facilite le filtrage de données par critère géographique. Pour cela, il est nécessaire de passer en paramètre le code géographique (GEO) et le niveau géographique (GEO_OBJECT). Exemple : je souhaite filtrer le jeu de données sur les capacités en hébergement touristique (identifiant DS_TOUR_CAP) pour le département de Loire-Atlantique uniquement (GEO=44 et GEO_OBJECT=DEP)","code":"get_local_data(   ds_name = \"DS_POPULATIONS_REFERENCE\",   geo = \"44\",   geo_object = \"DEP\" ) |>    dplyr::arrange(POPREF_MEASURE, TIME_PERIOD)"},{"path":"https://InseeFrLab.github.io/melodi/articles/B-donnees-locales.html","id":"filtrer-sur-toutes-les-communes-du-territoire-de-mon-choix","dir":"Articles","previous_headings":"","what":"Filtrer sur toutes les communes du territoire de mon choix","title":"Filtrer par critère géographique","text":"Pour les jeux de données proposant une diffusion au niveau communal, la fonction get_local_data_by_com facilite le filtrage de données sur toutes les communes du territoire de mon choix. Exemple : je souhaite filtrer le jeu de données sur les populations de référence issues du recensement de la population (identifiant DS_POPULATIONS_REFERENCE) sur toutes les communes de Nantes Métropole (GEO=244400404 et GEO_OBJECT=EPCI)","code":"my_local_data_by_com <- get_local_data_by_com(   ds_name = \"DS_POPULATIONS_REFERENCE\",   geo = \"244400404\",   geo_object = \"EPCI\" )"},{"path":[]},{"path":"https://InseeFrLab.github.io/melodi/articles/C-range.html","id":"cas-général-get_range","dir":"Articles","previous_headings":"Travailler avec les libellés : la range","what":"Cas général : get_range","title":"Travailler avec les libellés (range)","text":"chaque jeu de données est associée une “range”, c’est à dire l’ensemble des codes et libellés présents dans le jeu de données. Ainsi, récupérer la range d’un jeu de données permet de récupérer les libellés associés aux codes du jeu de données.","code":"data <- get_all_data(\"DS_POPULATIONS_REFERENCE\") range <- get_range(\"DS_POPULATIONS_REFERENCE\")  # Récupérons par exemples les libellés des codes de \"POPREF_MEASURE\" :  # \"Population municipale\", \"Population totale\", etc.  data |>    left_join(     y = range,     by = join_by(POPREF_MEASURE == MOD)   ) # la variable supplémentaire MOD_LABEL contient ainsi le libellé de la mesure"},{"path":"https://InseeFrLab.github.io/melodi/articles/C-range.html","id":"la-géographie-get_range_geo","dir":"Articles","previous_headings":"Travailler avec les libellés : la range","what":"La géographie : get_range_geo","title":"Travailler avec les libellés (range)","text":"L’usage le plus courant consiste à récupérer les libellés des codes géographiques. Exemple : “Nantes” pour la commune (GEO_OBJECT=‘COM’) dont le code GEO est ‘44109’. Pour cela, une fonction dédiée été créée, permettant d’obtenir codes et libellés de tous les territoires du jeu de données passé en paramètre : get_range_geo","code":"get_range_geo(\"DS_POPULATIONS_REFERENCE\") # GEO_LABEL contient le libellé associé aux codes GEO et GEO_OBJECT identifiant # un territoire dans le DS concerné"},{"path":"https://InseeFrLab.github.io/melodi/articles/D-usage_backoffice.html","id":"avoir-une-vue-globale-sur-les-jeux-de-données","dir":"Articles","previous_headings":"","what":"Avoir une vue globale sur les jeux de données","title":"Autres usages","text":"L’appel à get_catalog peut être utile pour avoir une vue d’ensemble des jeux de données et leur description. Le code suivant permet de constituer et ouvrir un fichier Excel récapitulatif des jeux de données en français et en anglais.","code":"catalog_fr <- get_catalog(\"fr\") |>    mutate(lang = \"fr\")  catalog_en <- get_catalog(\"en\") |>    mutate(lang = \"en\")  catalog_all <- catalog_fr |>    rbind(catalog_en) |>    relocate(lang) |>    arrange(identifier, desc(lang))  temp_xlsx <- tempfile(fileext = \".xlsx\")  openxlsx::write.xlsx(   x = catalog_all,   file = temp_xlsx,   colWidths = \"auto\",   withFilter = TRUE )  utils::browseURL(temp_xlsx)"},{"path":"https://InseeFrLab.github.io/melodi/articles/D-usage_backoffice.html","id":"télécharger-un-fichier-excel-généré-par-melodi","dir":"Articles","previous_headings":"","what":"Télécharger un fichier Excel généré par Melodi","title":"Autres usages","text":"L’ensemble des fichiers produits et publiés par Melodi sont accessibles via l’API et donc le package. La fonction get_file permet de récupérer et télécharger un fichier par son nom, et le renommer au besoin.","code":"fic_xlsx1 <- get_file(   ds_name = \"DS_EC_DECES\",   file_name = \"T1_DECES_JOUR_DEP_REG_FR\",   download_file_name = \"T1_DECES_JOUR_NAT_2024_10.xlsx\",   download_directory = tempdir() )"},{"path":"https://InseeFrLab.github.io/melodi/articles/D-usage_backoffice.html","id":"travailler-sur-un-autre-environnement-melodi","dir":"Articles","previous_headings":"","what":"Travailler sur un autre environnement Melodi","title":"Autres usages","text":"Le package dispose d’une option rmelodi.base_url_api permettant de travailler dans un autre environnement que Melodi en production : surcharger sa valeur permet de travailler dans un autre environnement que la production, en fournissant l’URL de l’API à utiliser. Tous les appels de fonction du package se feront alors sur cet autre environnement. S’il s’agit d’environnements internes, penser au besoin à désactiver le proxy pour l’URL en question.","code":"Sys.setenv(no_proxy = \"autre_url_api_melodi.fr\")  options(rmelodi.base_url_api = \"https://autre_url_api_melodi.fr\")  get_catalog() # <- La fonction appelle https://autre_url_api_melodi.fr/catalog/all"},{"path":"https://InseeFrLab.github.io/melodi/articles/melodi.html","id":"parcourir-les-jeux-de-données-disponibles","dir":"Articles","previous_headings":"","what":"Parcourir les jeux de données disponibles","title":"Prise en main","text":"La fonction get_catalog() permet de lister l’ensemble des jeux de données disponibles sur le catalogue de données de l’Insee. Chaque jeux de données (dataset, DS) dispose d’un identifiant unique (identifier) qui sera utile au requêtage. Une séléction de métadonnées est également proposé : description du jeu de données, date de dernière mise à jour, nombre de lignes…","code":"get_catalog()"},{"path":"https://InseeFrLab.github.io/melodi/articles/melodi.html","id":"obtenir-des-informations-sur-un-jeu-de-données","dir":"Articles","previous_headings":"","what":"Obtenir des informations sur un jeu de données","title":"Prise en main","text":"Intéressons nous aux données de populations de référence issues du recensement de la population. L’identifiant du jeu de données est DS_POPULATIONS_REFERENCE. l’aide de cet identifiant, get_metadata() permet d’obtenir les métadonnées associées à ce jeu de données","code":"ds_metadata <- get_metadata(ds_name = \"DS_POPULATIONS_REFERENCE\")"},{"path":"https://InseeFrLab.github.io/melodi/articles/melodi.html","id":"charger-entièrement-les-données-dun-jeu-de-données","dir":"Articles","previous_headings":"","what":"Charger entièrement les données d’un jeu de données","title":"Prise en main","text":"l’aide de l’identifiant du jeu de données, get_all_data() permet d’obtenir sous forme de data.frame le jeu de données dans son intégralité, non filtré.","code":"data <- get_all_data(ds_name = \"DS_POPULATIONS_REFERENCE\")"},{"path":"https://InseeFrLab.github.io/melodi/articles/melodi.html","id":"filtrer-ses-données-à-laide-de-lexplorateur","dir":"Articles","previous_headings":"","what":"Filtrer ses données à l’aide de l’explorateur","title":"Prise en main","text":"Se référer à l’article dédié","code":""},{"path":"https://InseeFrLab.github.io/melodi/articles/melodi.html","id":"filtrer-ses-données-locales-sur-un-territoire","dir":"Articles","previous_headings":"","what":"Filtrer ses données locales sur un territoire","title":"Prise en main","text":"Se référer à l’article dédié","code":""},{"path":"https://InseeFrLab.github.io/melodi/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Cédric Bobinec. Author, maintainer. Christophe Goudeau. Author. Institut national de la statistique et des études économiques. Copyright holder.","code":""},{"path":"https://InseeFrLab.github.io/melodi/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Bobinec C, Goudeau C (2026). melodi: Retrieve Data Insee Melodi APIs. R package version 1.0.0, https://InseeFrLab.github.io/melodi/.","code":"@Manual{,   title = {melodi: Retrieve Data from the Insee Melodi APIs},   author = {Cédric Bobinec and Christophe Goudeau},   year = {2026},   note = {R package version 1.0.0},   url = {https://InseeFrLab.github.io/melodi/}, }"},{"path":"https://InseeFrLab.github.io/melodi/index.html","id":"inseemelodi-r-package-","dir":"","previous_headings":"","what":"Retrieve Data from the Insee Melodi APIs","title":"Retrieve Data from the Insee Melodi APIs","text":"Package facilitant l’utilisation des données et métadonnées diffusées par l’Insee sur le catalogue de données de l’Insee (melodi)","code":""},{"path":"https://InseeFrLab.github.io/melodi/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Retrieve Data from the Insee Melodi APIs","text":"Installer la dernière version stable depuis github : (pour les agents Insee uniquement) installer la dernière version stable : (en environnement sans accès à github.com) télécharger la dernière “Release” disponible puis :","code":"# install.packages(\"remotes\") remotes::install_github(\"InseeFrLab/melodi\", build_vignettes = TRUE) install.packages(\"melodi\", repos = \"https://nexus.insee.fr/repository/r-public/\") install.packages(\"~/Downloads/melodi-1.0.0.tar.gz\")"},{"path":"https://InseeFrLab.github.io/melodi/index.html","id":"exemples","dir":"","previous_headings":"","what":"Exemples","title":"Retrieve Data from the Insee Melodi APIs","text":"Lister les jeux de données proposés par l’Insee via Melodi : Récupérer toutes les données d’un jeu de données par son identifiant :","code":"get_catalog() data <- get_all_data(\"DS_POPULATIONS_REFERENCE\")"},{"path":[]},{"path":"https://InseeFrLab.github.io/melodi/index.html","id":"authentification-et-quota-de-requêtes","dir":"","previous_headings":"Configuration","what":"Authentification et quota de requêtes","title":"Retrieve Data from the Insee Melodi APIs","text":"Le package repose sur l’API Melodi, accessible sans authentification. Son usage est limité à 30 requêtes par minute : au delà, un code réponse 429 est obtenu.","code":""},{"path":"https://InseeFrLab.github.io/melodi/index.html","id":"proxy","dir":"","previous_headings":"Configuration","what":"Proxy","title":"Retrieve Data from the Insee Melodi APIs","text":"Dans le cas d’une utilisation du package depuis un réseau d’entreprise, il peut être utile de configurer le proxy d’accès internet de la manière suivante :","code":"Sys.setenv(http_proxy = \"my_proxy_server:port\") Sys.setenv(https_proxy = \"my_proxy_server:port\"\") # Désactiver le proxy sur certaines adresses #Sys.setenv(no_proxy = \"exemple-url-interne.server.fr\")"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_all_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get all data from a dataset — get_all_data","title":"Get all data from a dataset — get_all_data","text":"Get data dataset","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_all_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get all data from a dataset — get_all_data","text":"","code":"get_all_data(   ds_name,   download_directory = tempdir(),   stringsAsFactors = FALSE,   remove_file = TRUE )"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_all_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get all data from a dataset — get_all_data","text":"ds_name Dataset name - use get_ds_list find dataset identifier download_directory Download directory - default system tempdir stringsAsFactors TRUE, strings variables data.frame converted factors - Default FALSE remove_file Remove downloaded data file loading data - Default TRUE","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_all_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get all data from a dataset — get_all_data","text":"data.frame data","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_all_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get all data from a dataset — get_all_data","text":"","code":"data <- get_all_data(\"DS_TICM_PRATIQUES\") #> Request dataset : https://api.insee.fr/melodi/catalog/DS_TICM_PRATIQUES #> Request ZIP CSV file : https://api.insee.fr/melodi/file/DS_TICM_PRATIQUES/DS_TICM_PRATIQUES_CSV_FR #> Remove downloaded files"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_catalog.html","id":null,"dir":"Reference","previous_headings":"","what":"Get list of available datasets — get_catalog","title":"Get list of available datasets — get_catalog","text":"Get list available datasets","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_catalog.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get list of available datasets — get_catalog","text":"","code":"get_catalog(lang = \"fr\")"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_catalog.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get list of available datasets — get_catalog","text":"lang lang metadata informations (default: fr)","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_catalog.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get list of available datasets — get_catalog","text":"data.frame containing list available datasets","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_catalog.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get list of available datasets — get_catalog","text":"","code":"get_catalog() #> Request all catalog : https://api.insee.fr/melodi/catalog/all #> # A tibble: 106 × 12 #>    identifier                 title_content subtitle_content description_content #>    <chr>                      <chr>         <chr>            <chr>               #>  1 DD_CNA_AGREGATS            Produit Inté… Comptes nationa… \"Le produit intéri… #>  2 DD_CNA_APU                 Comptes des … Comptes nationa… \"Le secteur instit… #>  3 DD_CNA_BRANCHES            Activité des… Comptes nationa… \"Données annuelles… #>  4 DD_CNA_CONSO_MENAGES_COIC… Consommation… Comptes nationa… \"Données annuelles… #>  5 DD_CNA_CONSO_MENAGES_PROD… Consommation… Comptes nationa… \"Données annuelles… #>  6 DD_CNA_ECH_EXT             Échanges ext… Comptes nationa… \"Données annuelles… #>  7 DD_CNA_PATRIMOINE          Comptes de p… Comptes nationa… \"Le patrimoine nat… #>  8 DD_CNA_PATRIMOINE_BRANCHES Comptes de p… Comptes nationa… \"Le patrimoine nat… #>  9 DD_CNA_REBS                Ressources e… Comptes nationa… \"\"                  #> 10 DD_CNA_SUT                 Tableau des … Comptes nationa… \"Le tableau des en… #> # ℹ 96 more rows #> # ℹ 8 more variables: abstract_content <chr>, temporal_startPeriod <date>, #> #   temporal_endPeriod <date>, modified <date>, spatialResolution <chr>, #> #   spatialTemporal <int>, numObservations <int>, numSeries <int> get_catalog(lang = \"en\") #> Request all catalog : https://api.insee.fr/melodi/catalog/all #> # A tibble: 106 × 12 #>    identifier                 title_content subtitle_content description_content #>    <chr>                      <chr>         <chr>            <chr>               #>  1 DD_CNA_AGREGATS            Gross domest… Base 2020 - Ann… \"Gross domestic pr… #>  2 DD_CNA_APU                 General gove… Annual national… \"The general gover… #>  3 DD_CNA_BRANCHES            Production a… National accoun… \"Annual data on th… #>  4 DD_CNA_CONSO_MENAGES_COIC… Households c… National accoun… \"Annual data on ac… #>  5 DD_CNA_CONSO_MENAGES_PROD… Household co… National accoun… \"Annual data on ac… #>  6 DD_CNA_ECH_EXT             Foreign exch… National Accoun… \"Annual data on Fr… #>  7 DD_CNA_PATRIMOINE          Balance sheet National accoun… \"National wealth r… #>  8 DD_CNA_PATRIMOINE_BRANCHES Balance shee… National Accoun… \"National wealth r… #>  9 DD_CNA_REBS                Goods and se… Base 2020 - Ann… \"\"                  #> 10 DD_CNA_SUT                 Supply and u… Base 2020 - Ann… \"The input-output … #> # ℹ 96 more rows #> # ℹ 8 more variables: abstract_content <chr>, temporal_startPeriod <date>, #> #   temporal_endPeriod <date>, modified <date>, spatialResolution <chr>, #> #   spatialTemporal <int>, numObservations <int>, numSeries <int>"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Melodi data by URL. — get_data","title":"Get Melodi data by URL. — get_data","text":"URL parameter can copied/pasted explorer https://catalogue-donnees.insee.fr","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Melodi data by URL. — get_data","text":"","code":"get_data(url)"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Melodi data by URL. — get_data","text":"url URL API data Melodi - Start \"https://api.insee.fr/melodi/data/...\"","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Melodi data by URL. — get_data","text":"data.frame data","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Melodi data by URL. — get_data","text":"","code":"get_data(   \"https://api.insee.fr/melodi/data/DS_POPULATIONS_REFERENCE?POPREF_MEASURE=PMUN&GEO=FRANCE-F\" ) #> Total count request : https://api.insee.fr/melodi/data/DS_POPULATIONS_REFERENCE?POPREF_MEASURE=PMUN&GEO=FRANCE-F&totalCount=TRUE&maxResult=0 #> Number of lines : 1 #>   GEO_REF GEO_OBJECT GEO FREQ TIME_PERIOD POPREF_MEASURE OBS_VALUE #> 1    2025     FRANCE   F    A        2023           PMUN  68094280"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Get file attached to a dataset : extract (XLSX), or full CSV file — get_file","title":"Get file attached to a dataset : extract (XLSX), or full CSV file — get_file","text":"Get file attached dataset : extract (XLSX), full CSV file","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get file attached to a dataset : extract (XLSX), or full CSV file — get_file","text":"","code":"get_file(   ds_name,   file_name,   download_file_name,   download_directory = tempdir() )"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get file attached to a dataset : extract (XLSX), or full CSV file — get_file","text":"ds_name Dataset name file_name File name download_file_name Filename disk download download_directory Download directory - default system tempdir","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get file attached to a dataset : extract (XLSX), or full CSV file — get_file","text":"downloaded file name disk","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get file attached to a dataset : extract (XLSX), or full CSV file — get_file","text":"","code":"get_file(   ds_name = \"DS_EC_DECES\",   file_name = \"T1_DECES_JOUR_NAT_FR\",   download_file_name = \"T1_DECES_JOUR_NAT_FR.xlsx\" ) #> Request file : https://api.insee.fr/melodi/file/DS_EC_DECES/T1_DECES_JOUR_NAT_FR #> Downloaded path : /tmp/RtmpcnZlqC/T1_DECES_JOUR_NAT_FR.xlsx #> [1] \"/tmp/RtmpcnZlqC/T1_DECES_JOUR_NAT_FR.xlsx\""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get data on one territory — get_local_data","title":"Get data on one territory — get_local_data","text":"Get data one territory","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get data on one territory — get_local_data","text":"","code":"get_local_data(ds_name, geo, geo_object, filter = \"\")"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get data on one territory — get_local_data","text":"ds_name Dataset name geo Code geo geo_object Geo Level filter additionnal filter request - default : \"\"","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get data on one territory — get_local_data","text":"data.frame data","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get data on one territory — get_local_data","text":"","code":"get_local_data(   ds_name = \"DS_POPULATIONS_REFERENCE\",   geo = \"69\",   geo_object = \"DEP\" ) #> Total count request : https://api.insee.fr/melodi/data/DS_POPULATIONS_REFERENCE?GEO=DEP-69&totalCount=TRUE&maxResult=0 #> Number of lines : 3 #>   GEO_REF GEO_OBJECT GEO FREQ TIME_PERIOD POPREF_MEASURE OBS_VALUE #> 1    2025        DEP  69    A        2023           PMUN   1914667 #> 2    2025        DEP  69    A        2023           PCAP     25348 #> 3    2025        DEP  69    A        2023           PTOT   1940015  get_local_data(   ds_name = \"DS_RP_POPULATION_PRINC\",   geo = \"69\",   geo_object = \"DEP\",   filter = \"SEX=F&AGE=Y20T64\" ) #> Total count request : https://api.insee.fr/melodi/data/DS_RP_POPULATION_PRINC?GEO=DEP-69&SEX=F&AGE=Y20T64&totalCount=TRUE&maxResult=0 #> Number of lines : 3 #>   GEO_REF GEO_OBJECT GEO SEX TIME_PERIOD RP_MEASURE    AGE OBS_VALUE #> 1    2025        DEP  69   F        2011        POP Y20T64  529046.9 #> 2    2025        DEP  69   F        2022        POP Y20T64  562310.0 #> 3    2025        DEP  69   F        2016        POP Y20T64  544085.5"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data_by_com.html","id":null,"dir":"Reference","previous_headings":"","what":"Get data on every Commune of one territory — get_local_data_by_com","title":"Get data on every Commune of one territory — get_local_data_by_com","text":"Get data every Commune one territory","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data_by_com.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get data on every Commune of one territory — get_local_data_by_com","text":"","code":"get_local_data_by_com(ds_name, geo, geo_object, filter = \"\")"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data_by_com.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get data on every Commune of one territory — get_local_data_by_com","text":"ds_name Dataset name geo Code geo geo_object Geo Level filter additionnal filter request - default : \"\"","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data_by_com.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get data on every Commune of one territory — get_local_data_by_com","text":"data.frame data","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_local_data_by_com.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get data on every Commune of one territory — get_local_data_by_com","text":"","code":"get_local_data_by_com(   ds_name = \"DS_POPULATIONS_REFERENCE\",   geo = \"44\",   geo_object = \"DEP\" ) |>   head() #> Total count request : https://api.insee.fr/melodi/data/DS_POPULATIONS_REFERENCE?GEO=DEP-44%2ACOM&totalCount=TRUE&maxResult=0 #> Number of lines : 615 #>   GEO_REF GEO_OBJECT   GEO FREQ TIME_PERIOD POPREF_MEASURE OBS_VALUE #> 1    2025        COM 44141    A        2023           PCAP        24 #> 2    2025        COM 44129    A        2023           PCAP       324 #> 3    2025        COM 44007    A        2023           PTOT      2513 #> 4    2025        COM 44043    A        2023           PMUN      7452 #> 5    2025        COM 44136    A        2023           PMUN      1321 #> 6    2025        COM 44179    A        2023           PMUN      5523  get_local_data_by_com(   ds_name = \"DS_RP_POPULATION_PRINC\",   geo = \"44\",   geo_object = \"DEP\",   filter = \"SEX=F&AGE=Y20T64\" ) |>   head() #> Total count request : https://api.insee.fr/melodi/data/DS_RP_POPULATION_PRINC?GEO=DEP-44%2ACOM&SEX=F&AGE=Y20T64&totalCount=TRUE&maxResult=0 #> Number of lines : 615 #>   GEO_REF GEO_OBJECT   GEO SEX TIME_PERIOD RP_MEASURE    AGE OBS_VALUE #> 1    2025        COM 44003   F        2022        POP Y20T64 3046.6872 #> 2    2025        COM 44069   F        2022        POP Y20T64 4605.4263 #> 3    2025        COM 44220   F        2022        POP Y20T64  514.5749 #> 4    2025        COM 44129   F        2022        POP Y20T64 3038.7726 #> 5    2025        COM 44188   F        2022        POP Y20T64 2603.6244 #> 6    2025        COM 44132   F        2022        POP Y20T64 3101.0829"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Get dataset metadata — get_metadata","title":"Get dataset metadata — get_metadata","text":"Get dataset metadata","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get dataset metadata — get_metadata","text":"","code":"get_metadata(ds_name)"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get dataset metadata — get_metadata","text":"ds_name Dataset name","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get dataset metadata — get_metadata","text":"list dataset metadata","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get dataset metadata — get_metadata","text":"","code":"get_metadata(\"DS_POPULATIONS_REFERENCE\") #> Request dataset : https://api.insee.fr/melodi/catalog/DS_POPULATIONS_REFERENCE #> $identifier #> [1] \"DS_POPULATIONS_REFERENCE\" #>  #> $uri #> [1] \"http://id.insee.fr/catalogues/jeuDeDonnees/c322eb4d-ec91-4723-8804-ea62e492612b\" #>  #> $title #>   lang                  content #> 1   fr Populations de référence #> 2   en   Reference populations  #>  #> $subtitle #>   lang                      content #> 1   fr Recensement de la population #> 2   en                              #>  #> $description #>   lang #> 1   fr #> 2   en #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  content #> 1 La loi du 27 février 2002 relative à la démocratie de proximité fixe comme premier objectif du recensement de la population la publication tous les ans des chiffres des populations de référence (ou populations légales) : population municipale, population comptée à part et population totale. Ces chiffres sont calculés pour la France, toutes ses communes et circonscriptions administratives. La responsabilité du calcul des populations de référence est confiée à l'Insee. \\n\\nLes données de population au 1er janvier 2023 dans les limites territoriales des communes au 1er janvier 2025 sont officielles et authentifiées par décret. Elles entrent en vigueur au 1er janvier 2026.  #> 2                                                                                                                                                                                                                                                                      The law of February 27, 2002, concerning local democracy, establishes as the primary objective of the population census the annual publication of legal population figures: municipal population, population counted separately, and total population. These figures are calculated for France, all its municipalities, and administrative districts. The responsibility for calculating legal populations is entrusted to INSEE. #>  #> $accessRights #>   lang content #> 1   fr   Libre #> 2   en    Free #>  #> $processStep #>   lang  content #> 1   fr inseeApi #> 2   en inseeApi #>  #> $confidentialityStatus #>   lang content #> 1   fr   Libre #> 2   en    Free #>  #> $type #>   lang          content #> 1   fr Données agrégées #> 2   en  Aggregated data #>  #> $issued #> [1] \"2025-12-17T08:35:21\" #>  #> $creator #> [1] \"Insee\" #>  #> $modified #> [1] \"2025-12-18T12:00:16\" #>  #> $publisher #> $publisher$id #> [1] \"INSEE\" #>  #> $publisher$label #>   lang                                                               content #> 1   fr Institut national de la statistique et des etudes economiques (INSEE) #> 2   en                 National Institute of Statistics and Economic Studies #>  #>  #> $wasGeneratedBy #>      id                                                   label #> 1 s1321 fr, en, Recensement de la population, Population census #> 2   s21 fr, en, Recensement de la population, Population census #>  #> $temporal #> $temporal$startPeriod #> [1] \"2023-01-01T00:00:00\" #>  #> $temporal$endPeriod #> [1] \"2023-01-01T00:00:00\" #>  #>  #> $temporalResolution #>                    label #> 1 fr, en, Annuel, Annual #>  #> $accrualPeriodicity #> $accrualPeriodicity$label #>   lang content #> 1   fr  Annuel #> 2   en  Annual #>  #>  #> $spatial #> $spatial$id #> [1] \"FEHM\" #>  #> $spatial$label #>   lang                  content #> 1   fr      France hors Mayotte #> 2   en France excluding Mayotte #>  #>  #> $spatialResolution #>       id                                                label #> 1    COM                             fr, en, Commune, Commune #> 2    ARM fr, en, Arrondissement municipal, Municipal district #> 3    ARR                     fr, en, Arrondissement, District #> 4    DEP                      fr, en, Département, Department #> 5    REG                               fr, en, Région, Region #> 6 FRANCE                               fr, en, France, France #>  #> $spatialTemporal #> [1] \"2025-01-01T01:00:00\" #>  #> $statisticalUnit #>                      label #> 1 fr, en, Individu, Person #>  #> $theme #>                                                                                      label #> 1                      fr, en, 1.1 Population et immigration, 1.1 Population and migration #> 2 fr, en, 1. Statistiques démographiques et sociales, 1. Demographic and social statistics #> 3                                                          fr, en, Démographie, Demography #>                       themeTaxonomy #> 1 classificationOfStatisticalDomain #> 2 classificationOfStatisticalDomain #> 3                        inseeTheme #>  #> $landingPage #> $landingPage[[1]] #>   lang url #> 1   fr     #> 2   en     #>  #>  #> $structure #> $structure$dsd #> [1] \"DSD_POPULATIONS_REFERENCE\" #>  #>  #> $product #>                                     id format              issued #> 1 DS_POPULATIONS_REFERENCE_2023_CSV_FR    CSV 2025-12-17T08:50:56 #>              modified                    title #> 1 2025-12-17T08:50:56 Populations de référence #>                                                                                        accessURL #> 1 https://api.insee.fr/melodi/file/DS_POPULATIONS_REFERENCE/DS_POPULATIONS_REFERENCE_2023_CSV_FR #>   byteSize   packageFormat mediaType language #> 1   926388 application/zip  text/csv       FR #>  #> $numObservations #> [1] 106065 #>  #> $numSeries #> [1] 0 #>  #> $keyword #>                                                         label #> 1                              fr, en, population, population #> 2        fr, en, population municipale , municipal population #> 3 fr, en, population comptée à part, population counted apart #> 4                 fr, en, population totale, total population #> 5              fr, en, populations légales, legal populations #> 6       fr, en, population de référence, reference population #>  #> $scopeNote #>   lang #> 1   fr #> 2   en #>                                                                                                                                                                            content #> 1                                                                                                                                                                                  #> 2 The term “reference populations” replaces the former term “legal populations” used until 2021. This change is based on a recommendation from the official statistics authority.  #>  #> $relations #>        title                                      titleComplement #> 1 fr, en, ,  fr, en, Documentation et données complémentaires, NA #> 2 fr, en, ,                                          fr, en, , NA #>                                                        url #> 1 fr, en, https://www.insee.fr/fr/statistiques/8681011, NA #> 2                                             fr, en, , NA #>  #> $abstract #>   lang #> 1   fr #> 2   en #>                                                                                                                                                                                                                                                                                                                                                                                                                          content #> 1                                                                                                                                                                                                       Données de populations de référence : population municipale, population comptée à part et population totale pour les différentes circonscriptions administratives : régions, départements, arrondissements et communes.  #> 2 The population data as of January 1, 2022, within the territorial boundaries of the municipalities as of January 1, 2024, is official and authenticated by decree. This data will take effect on January 1, 2025. The population figures are available for the various administrative divisions as of January 1, 2024, based on their territorial boundaries on that date: regions, departments, districts, and municipalities #>"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Get dataset range (codes and labels) — get_range","title":"Get dataset range (codes and labels) — get_range","text":"Retrieves list dimensions possible modalities values (codes human-readable labels) given dataset. GEO dimension, recommanded used dedicated function : get_range_geo()","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get dataset range (codes and labels) — get_range","text":"","code":"get_range(ds_name, lang = \"fr\", exclusions_list = c(\"GEO\"))"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get dataset range (codes and labels) — get_range","text":"ds_name dataset name lang french english labels - default french (\"fr\") exclusions_list exclude dimensions faster light result - default : \"GEO\"","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get dataset range (codes and labels) — get_range","text":"data frame dimensions modalities codes labels","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get dataset range (codes and labels) — get_range","text":"","code":"get_range(\"DS_POPULATIONS_REFERENCE\") #> Request dataset range : https://api.insee.fr/melodi/range/DS_POPULATIONS_REFERENCE #>              DIM          DIM_LABEL              MOD                 MOD_LABEL #> 1           FREQ          Fréquence                A                    Annuel #> 2    TIME_PERIOD Période temporelle             2023                      2023 #> 3 POPREF_MEASURE             Mesure             PCAP Population comptée à part #> 4 POPREF_MEASURE             Mesure             PMUN     Population municipale #> 5 POPREF_MEASURE             Mesure             PTOT         Population totale #> 6        MEASURE             Mesure OBS_VALUE_NIVEAU                    Valeur  get_range(   ds_name = \"DS_POPULATIONS_REFERENCE\",   lang = \"en\" ) #> Request dataset range : https://api.insee.fr/melodi/range/DS_POPULATIONS_REFERENCE #>              DIM   DIM_LABEL              MOD                MOD_LABEL #> 1           FREQ   Frequency                A                   Annual #> 2    TIME_PERIOD Time period             2023                     2023 #> 3 POPREF_MEASURE     Measure             PCAP Population counted apart #> 4 POPREF_MEASURE     Measure             PMUN     Municipal population #> 5 POPREF_MEASURE     Measure             PTOT         Total population #> 6        MEASURE     Measure OBS_VALUE_NIVEAU                    Value  get_range(   ds_name = \"DS_EC_DECES\",   exclusions_list = c(\"GEO\", \"TIME_PERIOD\") ) #> Request dataset range : https://api.insee.fr/melodi/range/DS_EC_DECES #>              DIM         DIM_LABEL              MOD #> 1     EC_MEASURE Mesure état civil              DTH #> 2     EC_MEASURE Mesure état civil         DTH_CUMR #> 3     EC_MEASURE Mesure état civil        DTH_MEAN2 #> 4     EC_MEASURE Mesure état civil        DTH_MEAN1 #> 5            SEX              Sexe                F #> 6            SEX              Sexe                M #> 7            SEX              Sexe               _T #> 8           FREQ         Fréquence                A #> 9           FREQ         Fréquence                M #> 10          FREQ         Fréquence                D #> 11     DTH_PLACE     Lieu du décès                2 #> 12     DTH_PLACE     Lieu du décès                3 #> 13     DTH_PLACE     Lieu du décès                4 #> 14     DTH_PLACE     Lieu du décès                5 #> 15     DTH_PLACE     Lieu du décès                1 #> 16     DTH_PLACE     Lieu du décès               _T #> 17           AGE               Âge           Y25T49 #> 18           AGE               Âge           Y50T64 #> 19           AGE               Âge           Y65T74 #> 20           AGE               Âge           Y75T84 #> 21           AGE               Âge           Y_GE85 #> 22           AGE               Âge           Y_LT25 #> 23           AGE               Âge               _T #> 24       MEASURE            Mesure OBS_VALUE_NIVEAU #> 25 OBS_STATUS_FR           Version                D #> 26 OBS_STATUS_FR           Version             PROV #>                                                       MOD_LABEL #> 1                                               Nombre de décès #> 2  Nombre de décès du 1er janvier à la fin du mois de référence #> 3       Nombre moyen de décès par jour sur les 7 derniers jours #> 4                                Nombre moyen de décès par jour #> 5                                                         Femme #> 6                                                         Homme #> 7                                                         Total #> 8                                                        Annuel #> 9                                                       Mensuel #> 10                                                    Quotidien #> 11                                       Établissement de santé #> 12                                    Ephad, maison de retraite #> 13                                          Voie ou lieu public #> 14                                   Autre lieu ou lieu inconnu #> 15                                                     Domicile #> 16                                                        Total #> 17                                               De 25 à 49 ans #> 18                                              De 50 à 64 ans  #> 19                                               De 65 à 74 ans #> 20                                               De 75 à 84 ans #> 21                                              85 ans ou plus  #> 22                                              Moins de 25 ans #> 23                                                        Total #> 24                                                       Valeur #> 25                                                    Définitif #> 26                                                   Provisoire"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range_geo.html","id":null,"dir":"Reference","previous_headings":"","what":"Get dataset's geography : codes and labels — get_range_geo","title":"Get dataset's geography : codes and labels — get_range_geo","text":"Retrieves list geo dimensions possible values (codes human-readable labels) given dataset.","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range_geo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get dataset's geography : codes and labels — get_range_geo","text":"","code":"get_range_geo(ds_name, lang = \"fr\")"},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range_geo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get dataset's geography : codes and labels — get_range_geo","text":"ds_name dataset name lang french english labels - default french (\"fr\")","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range_geo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get dataset's geography : codes and labels — get_range_geo","text":"data frame columns GEO_REF, GEO_OBJECT, GEO, GEO_LABEL","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range_geo.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get dataset's geography : codes and labels — get_range_geo","text":"dimensions, refer get_range()","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/get_range_geo.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get dataset's geography : codes and labels — get_range_geo","text":"","code":"get_range_geo(\"DS_POPULATIONS_REFERENCE\") |>   head() #> Request dataset range : https://api.insee.fr/melodi/range/DS_POPULATIONS_REFERENCE #>   GEO_REF GEO_OBJECT   GEO                    GEO_LABEL #> 1    2025        ARM 13201 Marseille 1er Arrondissement #> 2    2025        ARM 13202  Marseille 2e Arrondissement #> 3    2025        ARM 13203  Marseille 3e Arrondissement #> 4    2025        ARM 13204  Marseille 4e Arrondissement #> 5    2025        ARM 13205  Marseille 5e Arrondissement #> 6    2025        ARM 13206  Marseille 6e Arrondissement"},{"path":"https://InseeFrLab.github.io/melodi/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://InseeFrLab.github.io/melodi/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://InseeFrLab.github.io/melodi/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://InseeFrLab.github.io/melodi/news/index.html","id":"melodi-100","dir":"Changelog","previous_headings":"","what":"melodi 1.0.0","title":"melodi 1.0.0","text":"Relèvement du seuil de get_data à 100 000 lignes (amélioration de l’API Melodi) En tant qu’utilisateur, si besoin de changer un paramètre, simplement lancer : options(rmelodi.base_url_api = \"https://...\") Relectures diverses de documentation et du code (styler)","code":""},{"path":"https://InseeFrLab.github.io/melodi/news/index.html","id":"melodi-031","dir":"Changelog","previous_headings":"","what":"melodi 0.3.1","title":"melodi 0.3.1","text":"Correction d’exemples ne fonctionnant plus ou pas lisible dans la doc Adaptation des tests à vcr 2 (suppression du helper, relance des cassettes)","code":""},{"path":"https://InseeFrLab.github.io/melodi/news/index.html","id":"melodi-030","dir":"Changelog","previous_headings":"","what":"melodi 0.3.0","title":"melodi 0.3.0","text":"#5 : ajout de fonctions permettant de récupérer les libellés des codes associés à un jeu de données : get_range_geo (géographie) get_range (toutes les autres dimensions)","code":""},{"path":"https://InseeFrLab.github.io/melodi/news/index.html","id":"melodi-020","dir":"Changelog","previous_headings":"","what":"melodi 0.2.0","title":"melodi 0.2.0","text":"#16 : get_all_data : au lieu de construire la requête d’accès et les noms des fichiers dans le zip manuellement, récupération de l’URL via le catalogue (plus fiable et permet de gérer le cas où le CSV du DS est millésimé) #17 : get_catalog : ajout des millésimes géo et niveaux géographiques","code":""},{"path":"https://InseeFrLab.github.io/melodi/news/index.html","id":"melodi-011","dir":"Changelog","previous_headings":"","what":"melodi 0.1.1","title":"melodi 0.1.1","text":"Version initiale github","code":""}]
